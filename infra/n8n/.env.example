# Project
COMPOSE_PROJECT_NAME=n8n
TZ=UTC

# Domains
N8N_HOST=n8n.zangosen.com
N8N_WEBHOOK_HOST=webhook.zangosen.com
N8N_SCRAPE_HOST=n8n-scrape.zangosen.com
N8N_SCRAPE_WEBHOOK_HOST=scrape.zangosen.com

# Images / tags
N8N_IMAGE=n8nio/n8n
# Pin to a known-good n8n release; update intentionally
N8N_TAG=1.123.9
POSTGRES_TAG=16.11
REDIS_TAG=7.2.11-alpine
CLOUDFLARED_TAG=2025.11.1
BROWSERLESS_TAG=v2.31.1
# Project appears abandoned (last release Nov 2023) - consider alternatives
WATCHTOWER_TAG=latest
DB_BACKUP_TAG=latest
CADVISOR_TAG=v0.52.1
NODE_EXPORTER_TAG=v1.7.0
CURL_TAG=8.8.0
# Search services - pin to digests for stability (see README for instructions)
SEARXNG_IMAGE_REF=searxng/searxng:latest

# Database (internal only)
POSTGRES_DB=n8n
POSTGRES_USER=n8n
POSTGRES_PASSWORD=change-me-please
POSTGRES_SCRAPE_DB=n8n_scrape
PERPLEXICA_HOST=perplexica.zangosen.com
# LLM API Keys for Perplexica (at least one required)
# - OpenAI API Key (or use OpenRouter key which is OpenAI-compatible)
PERPLEXICA_OPENAI_API_KEY=
# - Google Gemini API Key
PERPLEXICA_GEMINI_API_KEY=
# - Groq API Key (for fast LLaMA models)
GROQ_API_KEY=

# n8n security
N8N_ENCRYPTION_KEY=generate-a-32-char-random-key
N8N_USER_MANAGEMENT_JWT_SECRET=change-me-too
N8N_RUNNERS_ENABLED=true
N8N_SCRAPE_ENCRYPTION_KEY=generate-a-32-char-random-key
N8N_SCRAPE_USER_MANAGEMENT_JWT_SECRET=change-me-too

# Redis
REDIS_PASSWORD=choose-a-strong-redis-pass
REDIS_SCRAPE_PASSWORD=choose-a-strong-redis-pass-2

# Autoscaler
MIN_REPLICAS=2
MAX_REPLICAS=8
SMA_WINDOW=5
SCALE_UP_QUEUE_THRESHOLD=1
SCALE_DOWN_QUEUE_THRESHOLD=1
RATE_DOWN_THRESHOLD=-0.25
POLLING_INTERVAL_SECONDS=20
SCALE_UP_COOLDOWN_SECONDS=30
SCALE_DOWN_COOLDOWN_SECONDS=300
MIN_WORKER_LIFETIME_SECONDS=300
SCALE_STEP_UP=1
SCALE_STEP_DOWN=1
PRIMARY_QUEUE_PATTERNS=

# Watchtower
WATCHTOWER_SCHEDULE=0 0 3 * * *

# Cloudflare Tunnel (named tunnel)
CLOUDFLARE_TUNNEL_TOKEN=
CLOUDFLARE_TUNNEL_ID=YOUR_TUNNEL_ID
CLOUDFLARE_TUNNEL_CREDENTIALS_FILE=YOUR_TUNNEL_ID.json

# Backups (S3)
S3_BUCKET=s3://your-bucket-name/path
S3_REGION=us-east-1
S3_PATH=postgres
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_ENDPOINT_URL=
AWS_S3_FORCE_PATH_STYLE=false

# Optional browserless token
# BROWSERLESS_TOKEN=

# Health pinger (optional)
HEALTHCHECK_URLS=
PING_INTERVAL_SECONDS=300

# Secondary pool (optional; leave unset to disable)
SECONDARY_SERVICE_NAME=
SECONDARY_QUEUE_PATTERNS=
SECONDARY_MIN_REPLICAS=1
SECONDARY_MAX_REPLICAS=4
SECONDARY_SMA_WINDOW=5
SECONDARY_UP_SMA_THRESHOLD=5
SECONDARY_DOWN_SMA_THRESHOLD=1
SECONDARY_RATE_DOWN_THRESHOLD=-0.25
SECONDARY_COOLDOWN_UP=30
SECONDARY_COOLDOWN_DOWN=300
SECONDARY_MIN_LIFETIME=300
SECONDARY_STEP_UP=1
SECONDARY_STEP_DOWN=1

# Scrape autoscaler (separate instance)
SCRAPE_MIN_REPLICAS=1
SCRAPE_MAX_REPLICAS=4
SCRAPE_SMA_WINDOW=5
SCRAPE_SCALE_UP_QUEUE_THRESHOLD=3
SCRAPE_SCALE_DOWN_QUEUE_THRESHOLD=1
SCRAPE_RATE_DOWN_THRESHOLD=-0.25
SCRAPE_POLLING_INTERVAL_SECONDS=20
SCRAPE_SCALE_UP_COOLDOWN_SECONDS=30
SCRAPE_SCALE_DOWN_COOLDOWN_SECONDS=300
SCRAPE_MIN_WORKER_LIFETIME_SECONDS=300
SCRAPE_SCALE_STEP_UP=1
SCRAPE_SCALE_STEP_DOWN=1

# SearXNG (private backend for Perplexica/Farfalle)
SEARXNG_INSTANCE_NAME=Daedalus SearXNG
SEARXNG_BASE_URL=http://searxng:8080
SEARXNG_SECRET_KEY=change-me-please

# Image refs (pin to digests for stability)
# Note: Use v1.11.2 (stable) instead of :main which may have bugs
QDRANT_IMAGE_REF=qdrant/qdrant:v1.16.2
PERPLEXICA_IMAGE_REF=itzcrazykns1337/perplexica:v1.11.2
